\section{Связанные работы}\label{related-work}

Подробное описание различных методов 3D-трекинга можно найти в обзорах
\cite{LepetitSurvey,MarchandSurvey}.
В данном разделе кратко описаны основные подходы и подробно разобраны методы,
основанные на информации о распределении цветов.

Множество методов 3D-трекинга
\cite{Hinterstoisser2007,Vacchetti2004,Lourakis2013,Pauwels2013}
основано на использовании информации о локальных
особенностях \cite{AKAZE,SIFT,ShiAndTomasi,TomasiAndKanade,SIFT,PyrLK}.
Предполагается, что особая 2D-точка соответствует определенной
3D-точке на поверхности объекта.
Таким образом составляется набор 2D-3D соответствий, по которым в дальнейшем
вычисляется позиция объекта\cite{EPnP}.
Такие методы устойчивы к частичным перекрытиям объекта, к сильно
текстурированному фону и хорошо справляются с отслеживанием симметричных
объектов.
Главным недостатком подходов на основе локальных точечных особенностей является
необходимое условие наличия у объекта неоднородной текстуры, на которой можно
было бы выделить достаточно большое количество особенных точек.
В связи с этим такие методы показывают неудовлетворительные результаты при
отслеживании объектов с однородной текстурой "--- слабо текстурированных.

Другие подходы используют предположение о том, что изображение объекта на кадре
хорошо отличимо от фона.
Проекция 3D-модели объекта на кадр из истинной позиции объекта при съемке
разделяет плоскость изображения на две области.
Одна область соответствует изображению объекта и называется \term{передним
планом}.
Оставшаяся область изображения называется \term{фоном}.
Многие методы используют предположение о том, что границе данных областей,
называемой \term{контуром}, соответствуют области с высоким значением
градиента "--- \term{границы} на изображении\cite{EdgesSurvey,CANNY}.
В работах
\cite{RAPID,Marchand2003,Choi2012,Marchand2006,Klein2006,SeoHinterstoisser2014,WangZhong2015,Damen2012,VacchettiEdges2004}
вычисляются 2D-3D соответствия между границами на изображении и ближайшими
точками спроецированного контура объекта.
Полученные соответствия используются для вычисления позиции.
Другие подходы \cite{WangZhong2017,Marchand2001,Bugaev_2018_ECCV} вычисляют
позицию объекта в процессе оптимизации функций энергии, максимизирующей
соответствие контуров объекта границам изображения.
Методы на основе границ могут устойчиво работать на слабо текстурированных
объектах, но при этом подвержены проблеме попадания в локальные оптимумы
при наличии сильно текстурированного фона.
Также такие методы могут давать сбои при трекинге симметричных объектов.

Подходы, основанные только на соответствии контуров объекта границам
изображения, не используют информацию о внутренней области объекта, которая
может существенно увеличивать устойчивость и точность.
В работах \cite{VacchettiEdges2004,ChoiFeaturesAndEdges,Bugaev_2018_ECCV}
предлагается комбинировать подходы на основе границ и подходы на основе
ключевых точек.
В частности, метод \cite{Bugaev_2018_ECCV} использует локальные особенности для
повышения устойчивости алгоритма определения позиции объекта на основе
оптимизации функции энергии контуров.
Такой подход более эффективен при отслеживании симметричных объектов, а также
лучше работает в сложных условиях с сильно текстурированным фоном, чем подходы,
основанные только на границах.
Однако симметричные объекты с однородной тестурой и, как следствие, малым
количеством локальных особенностей на текстуре, могут оказаться проблемой для
рассматриваемого метода.
Сильно текстурированный фон в сочетании со слабой текстурированностью
объекта также может приводить к неустойчивому трекингу.

Другим подходом, основанном на отделении переднего плана от фона, является
использование распределения цветов в этих областях.
Предполагается, что цвета объекта заметно отличаются от цветов фона.
Некоторые методы \cite{SeoHinterstoisser2014,WangZhong2015,Zhong2018}
используют информацию о цвете для улучшения подходов на основе контуров.
Например, в работах \cite{SeoHinterstoisser2014,WangZhong2015} распределение
цветов в окрестности граничной точки изображения используется для отсеивания
ложных 2D-3D соответствий между границами на изображении и контурами объекта.

В последние годы представлено множество подходов, предлагающих вычислять
позицию объекта в процессе сегментации переднего плана и фона.
В кадрах, для которых истинная позиция объекта известна, можно построить
гистограммы распределения цветов поверхности объекта и фона.
Эти гистограммы затем можно использовать для вычисления вероятности того, что в
некоторой позиции проекция модели верно отделяет объект от фона на кадре.
Искомой позицией считается та, в которой такая вероятность максимальна.
Трекинг в таком случае производится путем численной оптимизации функции
энергии, соответствующей данной вероятности.
Такой подход хорошо подходит для трекинга слабо текстурированных объектов, а
также довольно устойчив к сильно текстурированному фону.
Первой работой, использующей описанные принципы для 3D-трекинга, стал метод
PWP3D\cite{PWP3D}.
В дальнейших работах, основанных на этом методе, можно выделить три основных
направления, в которых производится развитие данного подхода.

Первое касается улучшения процесса оптимизации функции энергии, поскольку в
PWP3D используется малоэффективный метод градиентного спуска с фиксированным
шагом.
К тому же, сама энергия может содержать локальные оптимумы вдали от искомой
позиции, что создает проблемы для трекинга при быстром движении объекта.
Работа \cite{Zhao2014} описывает использование фильтра частиц для уменьшения
вероятности попадания в локальный оптимум в процессе оптимизации позиции.
В работе \cite{Tjaden2018} на замену градиентному спуску предложен способ
использовать эффективную стратегию оптимизации вероятности на основе алгоритма
Гаусса "--- Ньютона.
В нашей работе используется квазиньютоновский алгоритм SLSQP, позволяющий
задавать границы на область поиска оптимума, что улучшает результаты при работе
с симметричными объектами.
Также предлагаемый нами способ инициализации начального положения объекта
позволяет повысить устойчивость к попаданию в локальные оптимумы.

Второе направление развития связано с тем, что в PWP3D для задания
распределений цветов фона и объекта используется глобальная модель, состоящая
из одной гистограммы для фона и одной гистограммы для объекта.
Такой подход не учитывает локальность распределения цвета, а также неустойчив к
изменению фона и перекрытиям объекта.
В работе \cite{Hexner2016} вместо глобальной модели распределения цветов
предложено использовать локальные гистограммы цветов для регионов вокруг
2D-точек, соответствующих контуру объекта.
Область действия каждой гистограммы сокращается до круга определённого радиуса
вокруг точки контура, что позволяет учитывать информацию о цветах локально "---
область сбора статистики цветов представляет собой полосу вокруг границы
объекта.
В данной работе не предложено способа накапливать информацию о цветах в
процессе трекинга.
В работе \cite{Tjaden2017} предложено использовать по две гистограммы для
каждой вершины модели.
Каждая такая пара гистограмм служит для сбора статистики в некотором радиусе
вокруг проекции соответствующей вершины.
При этом используются гистограммы тех вершин, проекция которых близка к
контуру.
Поэтому, как и в~\cite{Hexner2016}, рассматриваются только цвета точек на
полосе вокруг границы объекта.
В то же время привязка гистограмм к вершинам модели даёт возможность собирать
цветовую статистику в ходе трекинга.
В случае большого числа вершин 3D-модели потребление памяти при таком подходе
становится весьма существенным, что приводит также и к снижению скорости работы
алгоритма.
Для того, чтобы частично справиться с этим, авторы работы \cite{Tjaden2017}
предлагают на каждом кадре обновлять не более ста гистограмм, случайно взятых
вблизи контура.
В работе \cite{Zhong2018} предлагается делить  область вокруг 2D-контура
объекта пополам в горизонтальном и ветикальном направлении на четыре сектора,
к каждому из которых привязывается пара гистограмм.
Однако в таком случае при сильном повороте цветовая статистика гистограммы
может перестать быть актуальной, поскольку поменяется часть поверхности
объекта, соответствующая сектору.
В нашей работе предлагается способ построения локальных гистограмм,
привязывающий разбивающий объект на 3D-секторы и позволяющий накапливать
статистику в ходе трекинга и в то же время сократить потребление памяти в
сравнении с \cite{Tjaden2017}.

Третье направление развития представляют алгоритмы, комбинирующие
цветовой подход с иными методами.
В случае использования локальных гистограмм информация о внутренней части
объекта остается незадействованной в ходе трекинга.
В работе \cite{Zhong2018} предлагается способ учитывать их с помощью ключевых
кадров, для чего используется так называемый прямой подход.
В текущей позиции для каждого пикселя внутренней части объекта
определяется соответствующая ему 3D-точка на поверхности модели,
а затем вычисляется, куда эта точка проецируется на ключевых кадрах.
После этого может быть посчитана мера различия пикселей между текущим и
ключевыми кадрами, для чего используются специальные дескрипторы, основанные на
градиенте изображения.
Таким образом, внутренние части объекта выравниваются путем минимизации
различий между текущим и ключевыми кадрами.
В результате метод \cite{Zhong2018} комбинирует информацию о статистике цветов
объекта и информацию о локальных градиентах текстуры объекта путем оптимизации
совместной функции энергии.
Такой подход улучшает точность данного метода и позволяет ему лучше справляться
с симметричными объектами.
В нашей работе предлагается способ комбинирования цветового трекинга с
трекингом на основе точечных особенностей, также помогающий преодолевать
неоднозначности при отслеживании симметричных объектов и позволяющий получать
более качественные результаты, чем использование составляющих методов
трекинга по-отдельности.
