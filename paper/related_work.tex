\section{Связанные работы}\label{related-work}

Подробное описание различных методов 3D-трекинга можно найти в обзорах
\cite{LepetitSurvey,MarchandSurvey}.
В данном разделе кратко описаны основные подходы и подробно разобраны методы,
основанные на информации о распределении цветов.

Множество методов 3D-трекинга
\cite{Hinterstoisser2007,Vacchetti2004,Lourakis2013,Pauwels2013}
основано на использовании информации о локальных
особенностях \cite{AKAZE,SIFT,ShiAndTomasi,TomasiAndKanade,SIFT,PyrLK}.
Предполагается, что особая 2D-точка соответствует определенной
3D-точке на поверхности объекта.
Таким образом составляется набор 2D-3D соответствий, по которым в дальнейшем
вычисляется позиция объекта\cite{EPnP}.
Такие методы устойчивы к частичным перекрытиям объекта, к сильно
текстурированному фону и хорошо справляются с отслеживанием симметричных
объектов.
Главным недостатком подходов на основе локальных точечных особенностей является
необходимое условие наличия у объекта неоднородной текстуры, на которой можно
было бы выделить достаточно большое количество ключевых точек.
В связи с этим такие методы показывают неудовлетворительные результаты при
отслеживании объектов с однородной текстурой (слабо текстурированных).

Другие подходы используют предположение о том, что изображение объекта на кадре
хорошо отличимо от фона.
Проекция 3D-модели объекта на кадр из той же позиции, в которой находился
объект при съемке кадра, разделяет плоскость изображения на две области.
Одна область соответствует изображению объекта и называется \term{передним
планом}.
Оставшаяся область изображения называется \term{фоном}.
Многие методы используют предположение о том, что границе данных областей,
называемой \term{контуром}, соответствуют области изображения с высоким
значением градиента "--- \term{границы} на изображении\cite{EdgesSurvey,CANNY}.
В работах
\cite{RAPID,Marchand2003,Choi2012,Marchand2006,Klein2006,SeoHinterstoisser2014,WangZhong2015,Damen2012,VacchettiEdges2004}
вычисляются 2D-3D соответствия между границами на изображении и ближайшими
точками спроецированного контура объекта.
Полученные соответствия используются для вычисления позиции.
Другие подходы \cite{WangZhong2017,Marchand2001,Bugaev_2018_ECCV} вычисляют
позицию объекта в процессе оптимизации функций энергии, максимизирующей
соответствие контуров объекта границам изображения.
Методы на основе границ могут устойчиво работать на слабо текстурированных
объектах, но при этом подвержены проблеме попадания в локальные оптимумы
при наличии сильно текстурированного фона.
Также такие методы могут давать сбои при трекинге симметричных объектов.

Подходы, основанные только на соответствии контуров объекта границам
изображения, не используют информацию о внутренней области объекта, которая
может существенно увеличивать устойчивость и точность.
В работах \cite{VacchettiEdges2004,ChoiFeaturesAndEdges,Bugaev_2018_ECCV}
предлагается комбинировать подходы на основе границ и подходы на основе
ключевых точек.
В частности, метод \cite{Bugaev_2018_ECCV} использует локальные особенности для
повышения устойчивости алгоритма определения позиции объекта на основе
оптимизации функции энергии контуров.
Такой подход более эффективен при отслеживании симметричных объектов, а также
лучше работает в сложных условиях с сильно текстурированным фоном, чем подходы,
основанные только на границах.
Однако симметричные объекты с однородной тестурой и, как следствие, малым
количеством локальных особенностей на текстуре, могут оказаться проблемой для
рассматриваемого метода.
Сильно текстурированный фон в сочетании со слабой текстурированностью
объекта также может приводить к неустойчивому трекингу.

Другим подходом, основанном на отделении переднего плана от фона, является
использование распределения цветов в этих областях.
Предполагается, что цвета объекта заметно отличаются от цветов фона.
Некоторые методы \cite{SeoHinterstoisser2014,WangZhong2015,Zhong2018}
используют информацию о цвете для улучшения подходов на основе контуров.
Например, в работах \cite{SeoHinterstoisser2014,WangZhong2015} распределение
цветов в окрестности граничной точки изображения используется для отсеивания
ложных 2D-3D соответствий между границами на изображении и контурами объекта.

В последние годы предложно множество подходов, предлагающих непосредственно
вычислять позицию объекта в процессе сегментации переднего плана и фона.
В кадрах, для которых истинная позиция объекта известна, передний план
соответствует объекту, а фон всему остальному изображению, что позволяет
строить гистограммы распределения цветов поверхности объекта и фона.
Эти гистограммы затем можно использовать для вычисления вероятности того, что в
заданной позиции проекция модели верно отделяет объект от фона на кадре.
Искомой позицией считается та, в которой такая вероятность максимальна.
Трекинг в таком случае производится путем численной оптимизации функции
энергии, соответствующей данной вероятности.

Первой работой, использующей описанные принципы для 3D-трекинга, стал метод
PWP3D\cite{PWP3D}.
Данный подход хорошо подходит для трекинга слабо текстурированных объектов, а
также довольно устойчив к сильно текстурированному фону.
Однако метод \cite{PWP3D} имеет несколько недостатков.
Во-первых, в процессе оптимизации используется низкоэффективный метод
градиентного спуска с фиксированным шагом.
Во-вторых, в PWP3D для задания распределений цветов фона и объекта используется
глобальная модель, состоящая из одной гистограммы для фона и одной гистограммы
для объекта.
Такой подход не учитывает локальность распределения цвета, а также неустойчив к
изменению фона и перекрытиям объекта.

\Comment{TODO: начиная с этого момента описание становится слишком хаотичным,
надо причесать.}

Поэтому многие последующие работы были сосредоточены на повышении
эффективности метода PWP3D.
В работе \cite{Hexner2016} было предложено использовать локальные гистограммы
цветов для регионов вокруг 2D-точек, соответствующих контуру, вместо глобальной
модели распределения цветов.
В таком случае область действия каждой гистограммы сокращается до круга
определённого радиуса вокруг точки контура.
Это позволяет учитывать информацию о цветах локально.
Точки берутся именно на контуре, так как в этом случае их окрестность
захватывает как область переднего плана, так и фона.
Из-за этого область, на которой собирается статистика цветов, представляет
собой полосу вокруг границы объекта.
Оптимизация направлена на то, чтобы контур максимизировал различие цветов на
переднем плане и на фоне.
Гистограммы для окрестностей точек контура помогают использовать цветовую
информацию локально, но не позволяют накапливать информацию в ходе трекинга,
так как привязаны только к точке контура на данном изображении.
В работе \cite{Tjaden2017} предложено использовать по две гистограммы для
каждой вершины модели.
Область действия таких гистограмм "--- окрестность проекции вершины.  На каждой
итерации используются гистограммы тех вершин, проекция которых близка к
контуру.
Поэтому, как и в~\cite{Hexner2016}, рассматриваются цвета точек на полосе
вокруг границы объекта.
Однако привязка гистограмм к вершинам модели не только делает их локальными, но
и даёт возможность собирать цветовую статистику в ходе трекинга.
При этом такое количество гистограмм в случае большого числа вершин приводит к
существенному потреблению памяти и снижению скорости работы алгоритма.
Хотя в~\cite{Tjaden2017} предлагается на каждом кадре обновлять не более 100
гистограмм, случайно взятых вблизи контура, их выбор нетривиален и может влиять
на качество трекинга
\Comment{TODO: переформулировать?}.

В работе \cite{Tjaden2018} было предложено использовать
эффективную стратегию оптимизации на основе алгоритма Гаусса "--- Ньютона.
Это позволило избежать необходимости ручного подбора шага, а также ускорить
сходимость метода.
\Comment{TODO: а в \cite{Tjaden2017} разве не было Гаусса "--- Ньютона?.}

\Comment{TODO: Пояснить про полосу около границы и внутренность.}

В \cite{Zhong2018} предлагается способ ограничения числа гистограмм путем
разбиения пространства изображения на секторы.
В случае поворота объекта отдельная гистограмма фиксирует цвета с разных частей
объекта, тогда как в \cite{Tjaden2017} гистограммы привязаны к определённым
вершинам и хранят информацию только об окрестностях их проекций.
Области вокруг границ объекта отслеживаются с использованием цветовых
гистограмм, а для того, чтобы контролировать соответствие внутренней части
проекции изображению, используются дескрипторы пикселей, основанные на
градиенте изображения.
В результате данный метод комбинирует информацию о статистике цветов объекта и
информацию о локальных градиентах текстуры объекта, что позволяет преодолевать
неоднозначности, вызванные симметричностью объекта.

В данной работе предлагается метод выбора локальных гистограмм, позволяющий
существенно сократить их число.
Подобно методам~\cite{Hexner2016,Tjaden2017,Tjaden2018}
и~\cite{Zhong2018}, статистика собирается на полосе вокруг контура объекта.
При этом гистограммы привязаны к определённым областям поверхности объекта, что позволяет накапливать в них данные о цвете этих областей в ходе трекинга.
Их количество может быть сравнительно небольшим, чтобы сохранить локальный характер гистограмм, не используя слишком большой объём оперативной памяти.
\Comment{TODO Подробнее о методе выбора гистограмм}

В результате комбинирования информации о статистике цветов с информацией об
особых точках на текстуре объета, предлагаемый метод преодолевает
неоднозначности при трекинге симметричных объектов.

В работе \cite{Zhao2014} также было предложено использовать фильтр частиц,
позволяющий уменьшить вероятность попадания в локальный оптимум в процессе
оптимизации.
В нашей работе для преодоления проблемы попадания в локальный оптимум
предлагается использование априорной оценки позиции на основе особых точек.
\Comment{TODO: подробнее о повышении стабильности оптимизации за счет
использования особых точек}
